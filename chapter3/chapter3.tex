% ************************** Thesis Chapter3 **********************************
\chapter{ระเบียบวิธีวิจัย}
ในการทําโครงการวิจัยเครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์ จะมีการทำงานหลากหลายส่วนมาทำงานร่วมกัน 
ซึ่งต้องมีระเบียบวิธีวิจัยอธิบายถึงขั้นตอนการดำเนินงานตั้งแต่เริ่มศึกษาข้อมูลจนไปถึงสิ้นสุดกระบวนการวิจัย
\section{ความต้องการของระบบ}
\subsection{ความต้องการเชิงการใช้งาน (functional requirements)}
\begin{enumerate}
	\setlength\itemsep{-0.25em}
    \item เครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์ต้องสามารถตัดวิดิโอช่วงเวลาที่ไม่มีมนุษย์อยู่ออกได้อัตโนมัติโดยใช้ปัญญาประดิษฐ์ 
	\item เครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์สามารถระบุตำแหน่งมนุษย์แต่ละคนในวิดีโอและจำแนกการกระทำของมนุษย์ในวิดีโอได้ 
	โดยการกระทำที่กำหนดจะประกอบไปด้วย ยืน นั่ง นอน เล่นโทรศัพท์ เดิน กินข้าว
	\item ชุดข้อมูลที่ได้จากเครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์ต้องสามารถนำไปใช้ในการพัฒนาโมเดลปัญญาประดิษฐ์ต่อได้ 
	\item สร้างระบบต้นแบบของเครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์ที่มนุษย์สามารถทำงานร่วมกับปัญญาประดิษฐ์ได้
	\item เครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์สามารถนำวิดีโอมาวิเคราะห์ข้อมูลการกระทำและตำแหน่งของมนุษย์แต่ละคน แล้วนำข้อมูลเหล่านั้นไปสร้างรายงานที่มีคำกำกับออกมาได้ โดยรายละเอียดรายงานจะมีดังนี้
	\begin{enumerate}
		\item ภาพ (Frame)
		\item ตำแหน่ง โดยจะบอกในลักษณะของกรอบสี่เหลี่ยมครอบพื้นที่ที่มนุษย์คนนั้นๆอยู่
		\item การกระทำ ซึ่งประกอบไปด้วย ยืน นั่ง เดิน เล่นโทรศัพท์ กินข้าว นอน
	\end{enumerate}
\end{enumerate}
\subsection{ความต้องการเชิงวิศวกรรม (non-functional requirements)}
\begin{enumerate}
	\setlength\itemsep{-0.25em}
	\item สร้างเครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์โดยใช้ภาษาไพธอน
	\item ความละเอียดอย่างต่ำของวิดีโอต้องมากกว่า 640 x 480 (กว้าง x สูง) 
	\item วิดีโอจะต้องมีอัตราเฟรมต่อวินาทีอย่างต่ำ 10 เฟรมต่อวินาที
\end{enumerate}
\clearpage

\section{ภาพรวมระบบของเครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์}
\begin{figure}[!ht]
    \centering
    \includegraphics[width=0.6\textwidth, height=1.0\textwidth]{chapter3/images/Overview/HowItWorks.png}
    \caption{ภาพรวมระบบของเครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์}
    \label{fig:labeling_overview}
\end{figure}
\clearpage

\section{หน้าที่ความรับผิดชอบ} 
\paragraph*{ปฐมพงศ์ สินธุ์งาม}
สร้างและทดสอบโมเดลปัญญาประดิษฐ์สำหรับจดจำการกระทำมนุษย์ I3D รวมถึงออกแบบและสร้างระบบ Tracker
\paragraph*{ศุภกร เบญจวิกรัย}
รวมฟังก์ชั่นและระบบต่างๆของเครื่องมือ รวมถึงออกแบบและสร้างระบบ Select และ Detect
\paragraph*{อุกฤษฎ์ เลิศวรรณาการ}
สร้างและทดสอบโมเดลปัญญาประดิษฐ์สำหรับจดจำการกระทำมนุษย์ Resnet-50 รวมถึงออกแบบและสร้างระบบ Person ReID 

\vspace{6mm}
\section{เครื่องมือที่ใช้ในงานวิจัย}
ในหัวข้อนี้จะกล่าวถึงซอฟต์แวร์ ภาษา และ program library ที่ใช้ในการพัฒนาระบบ รวมถึงข้อมูลจำเพาะของคอมพิวเตอร์ที่ใช้ในการพัฒนาระบบ
\subsection*{Pycharm community 2017.1.2} 
เป็นโปรแกรมไว้ใช้สำหรับเขียนและแก้ไขโค้ดซึ่งข้อดีของโปรแกรมนี้ คือ มีคุณสมบัติต่างๆที่สามารถอำนวยความสะดวกในการเขียนโปรแกรมได้ เช่น 
syntax highlighting, auto-completion ฯลฯ และสามารถประมวลผลโปรแกรมทดสอบแอปพลิเคชันได้

\subsection*{Jupyter 2017.1.2} เป็นโปรแกรมสำหรับเขียนโปรแกรมที่เหมาะสำหรับใช้ในการทดสอบโปรแกรมแต่ละส่วนได้ ซึ่งมีข้อดีคือ 
หากมีการแก้ไขโปรแกรมเพียงแค่บางส่วน ก็สามารถประมวลผลเฉพาะส่วนที่ต้องการได้มักจะใช้ในการสร้างโมเดลปัญญาประดิษฐ์

\subsection*{Qt Creator 4.9.2 (community)}
เป็นเครื่องมือสำหรับออกแบบหน้าต่างแอปพลิเคชันของ library PyQt ซึ่งมีข้อดีคือ เรียกใช้ง่ายมีวิดเจ็ต (widget) ที่สามารถใช้ได้หลากหลายเหมาะสำหรับการออกแบบ

\clearpage
\section{ภาษาที่ใช้ในการพัฒนาระบบ} 
	ใช้ภาษาไพธอนในการพัฒนาเป็นหลัก เพราะเป็นภาษาที่ปัจจุบันมีการใช้กันอย่างแพร่ มีเครื่องมือและ library ที่อำนวยความสะดวกในการพัฒนามากมาย 
	ทั้งยังเป็นภาษาที่สามารถเข้าใจได้ง่าย โดยในการทำวิจัยครั้งนี้ได้เลือก python 3.6.8 มาใช้ในการพัฒนา 
	เนื่องจากเป็นรุ่นที่รองรับการทำงานของ library Tensorflow 1.12 และ CUDA 9
\vspace{3mm}
\section{Program library ที่ใช้ในการพัฒนาระบบและแอปพลิเคชัน} 
\begin{tabular}{|c|c|c|}
		\hline
		{Library}&{Version}&{Description}\\
		\hline
		numpy	 			& 1.16.4		& library ใช้สำหรับการคำนวณและ array			\\
		pandas				& 0.24.2		& library ใช้สำหรับการจัดการข้อมูลที่อยู่ในรูปแบบของ excel				\\
		opencv			 	& 4.1.0.25		& library ใช้สำหรับการจัดการข้อมูลที่เป็นรูปภาพและวิดีโอ		\\
		pillow				& 6.0.0			& library ใช้สำหรับการจัดการข้อมูลที่เป็นรูปภาพ			\\
		torchsummary		& 1.5.1			& library ใช้สำหรับการวิเคราะห์โครงสร้างของโมเดล 							\\
		pytorch		 		& 1.10.0		& library ใช้สำหรับการสร้างปัญญาประดิษฐ์							\\
		torchvision			& 0.3.0	 		& library ใช้สำหรับการสร้างปัญญาประดิษฐ์							\\
		scikit-learn		& 0.21.2		& library ใช้สำหรับการสร้างปัญญาประดิษฐ์							\\
		scipy				& 1.3.0			& library ใช้สำหรับการสร้างปัญญาประดิษฐ์							\\
		sklearn				& 0.0			& library ใช้สำหรับการสร้างปัญญาประดิษฐ์							\\
		pickleshare			& 0.7.5			& library ใช้สำหรับการทำถอดรหัส (encoding) โมเดลปัญญาประดิษฐ์			\\
		tqdm				& 4.32.1		& library ใช้สำหรับจัดการการทำงานซ้ำ (loop)					\\
		pyqt5				& 5.9.2			& library ใช้สำหรับการทำแอปพลิเคชัน					\\
		\hline
\end{tabular}

\vspace{3mm}
\section{แผนการดำเนินงาน}
โดยจากที่กล่าวไปตอนต้นในบทนำการดำเนินงานและการออกแบบการสร้างเครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์
และระบบวิเคราะห์การกระทำของมนุษย์ในวิดีโอ มีแผนการทำงานซึ่งถูกแบ่งออกเป็นสามขั้นตอนดังนี้
\begin{enumerate}
	\setlength\itemsep{-0.25em}
	\item ศึกษาหาความเป็นไปได้ รวมถึงเทคโนโลยีในปัจจุบันที่เกี่ยวกับการสร้างแอปพลิเคชัน และการจำแนกการกระทำของมนุษย์ด้วยปัญญาประดิษฐ์ 
	เพื่อศึกษาและทำความเข้าใจ ข้อดี-ข้อเสีย ของเทคนิคหรือกระบวนการต่างๆ เพื่อนำมาประยุกต์ใช้กับงานวิจัยนี้
	\item ออกแบบและสร้างแอปพลิเคชันที่ใช้ในการสร้างชุดข้อมูลสำหรับการเทรนโมเดลจากวิดีโอ
	\item ออกแบบและสร้างระบบวิเคราะห์การกระทำของมนุษย์ได้โดยมีข้อกำหนดตามที่กล่าวไว้ในบทนำ
\end{enumerate}
\clearpage

ในการศึกษาเกี่ยวกับการออกแบบและการสร้างแอปพลิเคชันที่ใช้ในการสร้างชุดข้อมูลสำหรับการสร้างโมเดลจากวิดีโอ 
สิ่งที่ต้องให้ความสนใจคือฟังก์ชันการทำงาน การออกแบบและการจัดวางองค์ประกอบต่างๆในหน้าต่างแอปพลิเคชัน
และความสะดวกในการใช้งาน จากนั้นจึงเริ่มศึกษาเกี่ยวกับ library ที่ใช้ในการสร้างแอพพลิเคชั่น
ส่วนการศึกษาเกี่ยวกับการสร้างระบบวิเคราะห์การกระทำมนุษย์ จะมุ่งความสนใจไปที่ชุดข้อมูลสำหรับการวิเคราะห์วิดีโอ
โมเดลสำหรับการวิเคราะห์วิดีโอ เทคนิคในการสร้างโมเดล เทคโนโลยีในการทำระบบวิเคราะห์วิดีโอ
เพื่อใช้ในการออกแบบและสร้างระบบวิเคราะห์การกระทำของมนุษย์ในวิดีโอให้มีประสิทธิภาพ
ในบทนี้ก็จะกล่าวถึงกระบวนการออกแบบและการดำเนินการตามแผนที่วางเอาไว้
\section{การออกแบบหน้าต่างแอปพลิเคชันของเครื่องมือกำกับคุณลักษณะด้วยปัญญาประดิษฐ์}
\input{chapter3/labeler}
\clearpage

\section{การออกแบบการทดสอบการตรวจจับวัตถุ}
\subsection{ทดสอบประสิทธิภาพการทำงานของโมเดลปัญญาประดิษฐ์สำหรับการทำการตรวจจับภาพบุคคล}
\input{chapter3/chapter3_object_detection}
\clearpage

\section{การออกแบบการทดสอบการติดตามการเคลื่อนไหวตำแหน่งต่อไปของมนุษย์}
\subsection{ทดสอบประสิทธิภาพการทำงานของระบบการติดตามการเคลื่อนไหวตำแหน่งต่อไปของวัตถุในวิดีโอ}
\input{chapter3/track_experimental.tex}
\clearpage

\section{การออกแบบการทดสอบการระบุตัวตนของมนุษย์}
\subsection{ทดสอบประสิทธิภาพการทำงานของระบบระบุตัวตนของบุคคลภายในภาพ}
\input{chapter3/experiment_reid.tex}
\clearpage

\section{การออกแบบการทดสอบการจำแนกการกระทำของมนุษย์}
\subsection{ทดสอบประสิทธิภาพการทำงานของโมเดลปัญญาประดิษฐ์ Resnet50 ที่ถูกสร้างด้วยชุดข้อมูลของ AVA โดยใช้ชุดข้อมูลของ AVA ในการทดสอบและเทียบผลลัพธ์กับแหล่งอ้างอิง}
\input{chapter3/Experimental}
\clearpage
\subsection{ทดสอบประสิทธิภาพการทำงานของโมเดลปัญญาประดิษฐ์ I3D สร้างด้วยชุดข้อมูลที่ผู้วิจัยสร้างขึ้น โดยใช้ชุดข้อมูลที่ผู้วิจัยสร้างขึ้นในการทดสอบ}
\input{chapter3/I3D_Ex}